:root {
    --bg-gradient-start: #f0f2f5;
    --bg-gradient-end: #e8ebef;
    --text-primary: #1c1e21;
    --text-secondary: #606770;
    --accent-primary: #ff4d00;
    --accent-secondary: #ff4d00;
    --card-bg: #fff;
    --card-shadow: rgba(0,0,0,0.1);
    --footer-bg: #fff;
    --footer-border: #ddd;
    --footer-text: #606770;
    --footer-selected: var(--accent-primary);
    --modal-bg: rgba(240,240,240,0.98);
    --modal-input-bg: #fff;
    --modal-input-text: #1c1e21;
    --modal-close-icon: #606770;
    --player-fullpage-bg: #000; /* Darker for full page player */
    --player-text-on-dark: #e0e0e0;
    --player-minimized-bar-bg: #fdfdfd;
    --player-minimized-bar-border: #e0e0e0;
    --player-minimized-bar-text: var(--text-primary);

    --profile-page-item-bg: #fff;
    --profile-page-item-hover-bg: #f5f5f5;
    --profile-icon-color: var(--text-secondary);
    --scrollbar-thumb: #c1c1c1;
    --scrollbar-track: #e4e4e4;
    --footer-height: 60px;
    --footer-height-small: 55px;
    --minimized-player-bar-height: 60px;
    --minimized-player-bar-height-small: 55px;

    --channel-icon-color: var(--accent-primary);
    --category-pill-bg: #e4e7eb;
    --category-pill-text: var(--text-primary);
    --category-pill-active-bg: var(--accent-primary);
    --category-pill-active-text: #fff;
    --channel-card-blur-opacity: 1.5;
    --channel-card-blur-amount: 20px;
    --channel-card-width: 160px;

    --topbar-height: 60px;
    --hero-content-visual-height-mobile: 55vh;
    --hero-content-visual-min-height-mobile: 370px;
    --hero-content-visual-max-height-mobile: 500px;
    --hero-content-visual-height-desktop: 60vh;
    --hero-content-visual-min-height-desktop: 450px;
    --hero-content-visual-max-height-desktop: 580px;

    --channel-card-horizontal-gap: 14px;
    --category-list-padding: 18px;

    --logo-desktop-bg-light: rgba(255, 255, 255, 0.85); /* Kept for potential other logo uses, but made transparent for main logo */
    --logo-desktop-bg-dark: rgba(31, 31, 31, 0.85); /* Kept for potential other logo uses */
    --always-white: #ffffff;
}

body.dark-mode {
    --bg-gradient-start: #121212;
    --bg-gradient-end: #181818;
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0a0;
    --card-bg: #1f1f1f;
    --card-shadow: rgba(0,0,0,0.25);
    --footer-bg: #1a1a1a;
    --footer-border: #333;
    --footer-text: #bbb;
    --footer-selected: #fff;
    --modal-bg: rgba(15,15,15,0.98);
    --modal-input-bg: #282828;
    --modal-input-text: #fff;
    --modal-close-icon: #aaa;
    --profile-page-item-bg: #2a2a2a;
    --profile-page-item-hover-bg: #383838;
    --profile-icon-color: var(--text-secondary);
    --scrollbar-thumb: #555;
    --scrollbar-track: #222;
    --channel-icon-color: #ffffff;
    --category-pill-bg: #333;
    --category-pill-text: #eee;
    --channel-card-blur-opacity: 0.6;
    --player-fullpage-bg: #0c0c0c;
    --player-text-on-dark: #f0f0f0;
    --player-minimized-bar-bg: #1a1a1a;
    --player-minimized-bar-border: #444;
    --player-minimized-bar-text: var(--text-primary);
}

body { margin: 0; background: var(--bg-gradient-end); font-family: 'gilroy-bold', sans-serif; color: var(--text-primary); padding-bottom: var(--footer-height); -webkit-tap-highlight-color: transparent; transition: background 0.3s ease, color 0.3s ease, padding-bottom 0.3s ease-out; overflow-x: hidden; }
body.player-fullpage-active-no-scroll { overflow-y: hidden; } /* Prevent body scroll when full-page player is active */
body.player-minimized-bar-active { padding-bottom: calc(var(--footer-height) + var(--minimized-player-bar-height)); }

.topbar { display: flex; align-items: center; justify-content: space-between; padding: 0 18px; height: var(--topbar-height); box-sizing: border-box; position: fixed; top:0; left:0; right:0; background:transparent; z-index: 150; transition: background-color 0.3s ease, box-shadow 0.3s ease;}
body:not(.home-at-top) .topbar { background-color: var(--bg-gradient-end); box-shadow: 0 2px 5px var(--card-shadow); }
a.logo { color: var(--text-primary); user-select: none; margin: 0; padding: 0; display: flex; align-items: center; height: 100%; text-decoration: none; cursor: pointer; }
a.logo img { height: 30px; width: auto; display: block; }
.desktop-vertical-nav { display: none; }
.topbar-icons { display: flex; align-items: center; gap: 16px; position: relative; height:100%;}
.topbar .material-symbols-outlined { font-size: 26px; color: var(--text-primary); cursor: pointer; background: none; padding: 4px; border-radius: 50%; transition: background-color 0.2s, color 0.3s ease, font-variation-settings 0.2s ease; font-variation-settings: 'FILL' 0; }
.topbar .material-symbols-outlined:hover { background-color: rgba(100, 100, 100, 0.1); body.dark-mode & { background-color: rgba(200,200,200,0.1); }}

#mainContainer { padding-top: var(--topbar-height); position: relative; }
.main-content, .categories-page, .profile-page { display: none; animation: fadeIn 0.3s ease-in-out; color: var(--text-primary); transition: color 0.3s ease; }
#homeSection { padding: 0; position: relative; }
.categories-page, .profile-page { padding: 20px 0; }
.main-content.active, .categories-page.active, .profile-page.active { display: block; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.home-hero-background { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; overflow: hidden; background-color: #080808; z-index: 0; display: none; }
body.home-at-top .home-hero-background { display: block; }
.home-hero-background .feature-slide-background-item { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; transform: translateY(10px); transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out; transition-delay: 0.1s; z-index: 1;}
.home-hero-background .feature-slide-background-item.active { opacity: 1; transform: translateY(0); }
.home-hero-background .home-hero-gradient-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.3) 25%, rgba(0,0,0,0.0) 50%,  rgba(0,0,0,0.7) 80%,  rgba(0,0,0,1) 100%), radial-gradient(ellipse at 100% 0%, transparent 0%, rgba(0,0,0,0.15) 30%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0.9) 85%, rgba(0,0,0,1) 100%); z-index: 2; }
.hero-content-area-wrapper { height: var(--hero-content-visual-height-mobile); min-height: var(--hero-content-visual-min-height-mobile); max-height: var(--hero-content-visual-max-height-mobile); position: relative; z-index: 10; display: none; }
body.home-at-top #homeSection .hero-content-area-wrapper { display: block; }
.home-hero-content { position: absolute; bottom: 45px; left: 0; right: 0; padding: 0 18px 18px 18px; box-sizing: border-box; display: flex; flex-direction: row; align-items: flex-end; justify-content: space-between; pointer-events: none; color: #fff; opacity: 0; transition: opacity 0.3s ease-in-out; }
.home-hero-content.active { opacity: 1; }
.home-hero-content .feature-content-details { pointer-events: auto; max-width: 65%; }
.home-hero-content .feature-logo, .home-hero-content .feature-title, .home-hero-content .feature-desc { opacity: 0; transition-property: opacity, transform; transition-duration: 0.7s; transition-timing-function: ease-out; color: #fff; text-shadow: 1px 1px 3px rgba(0,0,0,0.8); }
.home-hero-content .feature-logo { transform: translateY(10px); }
.home-hero-content .feature-title { font-size: 2em; transform: translateY(20px); }
.home-hero-content .feature-desc { transform: translateY(30px); }
.home-hero-content.visible-content .feature-logo { opacity: 1; transform: translateY(0); transition-delay: 0.4s; }
.home-hero-content.visible-content .feature-title { opacity: 1; transform: translateY(0); transition-delay: 0.6s; }
.home-hero-content.visible-content .feature-desc { opacity: 1; transform: translateY(0); transition-delay: 0.8s; }
.home-hero-content .feature-logo { min-height: 25px; margin-bottom: 10px; }
.home-hero-content .feature-logo img { height: 35px; max-width: 180px; object-fit: contain; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.6)); }
.home-hero-content .feature-desc { font-size: 1em; color: #e0e0e0; line-height: 1.4;}
.home-hero-content .feature-dots-container { display: flex; gap: 8px; pointer-events: auto; align-self: flex-end; }
.home-hero-content .feature-dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.4); cursor: pointer; transition: background-color 0.3s ease-in-out, transform 0.2s ease-out; }
.home-hero-content .feature-dot.active { background-color: #fff; transform: scale(1.2); }

.home-page-content-below-hero { background-color: var(--bg-gradient-end); position: relative; z-index: 5; padding: 0 0 20px 0; transition: background-color 0.3s ease; }
body.home-at-top .home-page-content-below-hero { background-color: transparent; }
.home-page-content-below-hero .section-title-container,
.home-page-content-below-hero .horizontal-list { padding-left: var(--category-list-padding); padding-right: var(--category-list-padding); }
.home-page-content-below-hero .horizontal-list { gap: var(--channel-card-horizontal-gap); }
.section-title-container { display: flex; justify-content: space-between; align-items: center; margin: 25px 0 14px 0px; }
.section-title { font-size: 1.2em; font-weight: 800; letter-spacing: 0.3px; color: var(--text-primary); user-select: none; transition: color 0.3s ease; display: flex; align-items: center; gap: 8px; margin: 0; }
body.home-at-top .section-title { color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.7); }
body.home-at-top .section-title .material-symbols-outlined { color: var(--accent-primary); }

.horizontal-list { display: flex; overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; padding-bottom: 10px; margin-bottom: 14px; min-height: 110px; align-items: flex-end; }
.horizontal-list::-webkit-scrollbar { display: none;}
.loading-text { color: var(--text-secondary); padding: 10px; width: 100%; text-align: center; font-size: 0.9em; align-self: center; }
body.home-at-top .loading-text:not(.search-results-modal .loading-text) { color: #bbb; } /* Hero/Top channels loading on dark bg */

.channel-card { width: var(--channel-card-width); aspect-ratio: 16 / 9; height: auto; background-color: var(--card-bg); border-radius: 12px; padding: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; cursor: pointer; transition: transform 0.15s ease-out, box-shadow 0.15s ease-out; border: none; box-shadow: 0 4px 10px var(--card-shadow); flex-shrink: 0; overflow: hidden; }
.channel-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: var(--logo-url); background-size: cover; background-position: center; filter: blur(var(--channel-card-blur-amount)) brightness(100%) saturate(100%); opacity: var(--channel-card-blur-opacity); border-radius: inherit; z-index: 0; transform: scale(1.1); }
.channel-card:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 7px 18px var(--card-shadow); }
.channel-card img { max-width: 80%; max-height: 70%; object-fit: contain; border: none; margin-bottom: 0; display: block; position: relative; z-index: 1; }
.channel-card .channel-live-icon { position: absolute; top: 6px; right: 6px; font-size: 18px; color: var(--channel-icon-color); background-color: rgba(0, 0, 0, 0.2); border-radius: 50%; padding: 2px; display: flex; align-items: center; justify-content: center; font-variation-settings: 'FILL' 1; transition: color 0.3s ease; z-index: 2;}

.categories-header, .category-pills-container, .category-title, .category-channels { padding-left: var(--category-list-padding); padding-right: var(--category-list-padding); }
.categories-header { font-size: 1.1em; font-weight: 800; margin-bottom: 15px; letter-spacing: 0.4px; color: var(--text-primary); transition: color 0.3s ease; }
.category-pills-container { display: flex; overflow-x: auto; gap: 10px; margin-bottom: 15px; scrollbar-width: none; -ms-overflow-style: none; box-sizing: border-box;}
.category-pills-container::-webkit-scrollbar { display: none; }
.category-pill { background-color: var(--category-pill-bg); color: var(--category-pill-text); border: none; padding: 8px 15px; border-radius: 20px; font-family: 'gilroy-bold', sans-serif; font-size: 0.9em; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px; white-space: nowrap; transition: background-color 0.2s, color 0.2s; }
.category-pill .material-symbols-outlined { font-size: 1.1em; font-variation-settings: 'FILL' 0; }
.category-pill:hover { background-color: var(--profile-page-item-hover-bg); }
.category-pill.active { background-color: var(--category-pill-active-bg); color: var(--category-pill-active-text); }
.category-pill.active .material-symbols-outlined { font-variation-settings: 'FILL' 1; }
.category-group { margin-bottom: 28px; margin-top: 25px; }
.category-title { font-size: 1.2em; font-weight: 700; color: var(--text-primary); margin-bottom: 10px; transition: color 0.3s ease; display: flex; align-items: center; gap: 8px; }
.category-title .material-symbols-outlined { font-size: 1em; color: var(--accent-primary); }
.category-channels { display: flex; gap: var(--channel-card-horizontal-gap); overflow-x: auto; flex-wrap: nowrap; scrollbar-width: none; padding-bottom: 10px; min-height: calc(var(--channel-card-width) * 9 / 16 + 20px); align-items: flex-start; box-sizing: border-box; }
.category-channels::-webkit-scrollbar { display: none;}

.footer-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: var(--footer-height); background: var(--footer-bg); border-radius: 0; display: flex; justify-content: space-around; align-items: stretch; padding: 0; border-top: 1px solid var(--footer-border); z-index: 1000; box-shadow: 0 -3px 15px var(--card-shadow); box-sizing: border-box; transition: background-color 0.3s ease, border-color 0.3s ease; }
.footer-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--footer-text); font-weight: 700; cursor: pointer; user-select: none; min-width: 60px; padding: 4px 8px; transition: color 0.2s ease-in-out; flex: 1; text-align: center; height: 100%; }
.footer-item .footer-icon { font-size: 25px; margin-bottom: 3px; font-variation-settings: 'FILL' 0; transition: transform 0.2s ease-in-out, font-variation-settings 0.3s ease; }
.footer-item.selected { color: var(--footer-selected); }
.footer-item.selected .footer-icon { transform: scale(1.1); font-variation-settings: 'FILL' 1; }
.footer-label { font-size: 13px; font-weight: 600; line-height: 1.2; }

.search-modal { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: var(--modal-bg); z-index: 2000; padding-top: 20px; text-align: left; animation: fadeInModal 0.3s ease-out; transition: background-color 0.3s ease; }
.search-modal.active { display: block;}
@keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }
.search-modal .search-bar-modal { display: flex; align-items: center; margin: 0 18px 18px 18px; padding: 0; background: var(--modal-input-bg); border-radius: 25px; padding: 5px 5px 5px 15px; transition: background-color 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.search-modal input[type="text"] { flex: 1; font-size: 1.05em; padding: 8px 5px; border: none; background: transparent; color: var(--modal-input-text); font-family: 'gilroy-bold', sans-serif; outline: none; margin-right: 10px; transition: color 0.3s ease; }
.search-modal .search-bar-modal .material-symbols-outlined { font-size: 26px; color: var(--modal-close-icon); cursor: pointer; background: none; padding: 6px; border-radius: 50%; transition: color 0.2s, background-color 0.2s; font-variation-settings: 'FILL' 0; }
.search-modal .search-bar-modal .material-symbols-outlined:hover { color: var(--accent-primary); background-color: rgba(100, 100, 100, 0.05); body.dark-mode & { background-color: rgba(200,200,200,0.05); }}
.search-results-modal { max-height: calc(100vh - 100px); overflow-y: auto; margin: 0 18px; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track); transition: scrollbar-color 0.3s ease; }
.search-results-modal::-webkit-scrollbar { width: 6px; }
.search-results-modal::-webkit-scrollbar-track { background: var(--scrollbar-track); transition: background-color 0.3s ease;}
.search-results-modal::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); border-radius: 6px; transition: background-color 0.3s ease;}
.search-result-card { background: var(--profile-page-item-bg); border-radius: 10px; padding: 12px; margin-bottom: 12px; display: flex; align-items: center; cursor: pointer; transition: background 0.15s ease-out; box-shadow: 0 1px 3px var(--card-shadow); }
.search-result-card:hover { background: var(--profile-page-item-hover-bg);}
.search-result-card img { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; margin-right: 14px; background: #eee; body.dark-mode & { background: #333; } flex-shrink: 0; }
.search-result-info { flex: 1; overflow: hidden;}
.search-result-title { font-size: 1em; font-weight: 700; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; transition: color 0.3s ease; }
.search-result-type { font-size: 0.85em; color: var(--accent-primary); font-weight: 700; margin-top: 3px;}

/* --- PLAYER STYLES START --- */
.player-container {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 3000; display: none; /* Hidden by default, JS adds .active */
    pointer-events: none; /* Container itself is passthrough unless active */
}
.player-container.active { display: block; /* Or flex if needed for centering player-box-fullpage */ }

/* Full Page Player */
.player-box-fullpage {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--player-fullpage-bg);
    color: var(--player-text-on-dark);
    display: none; /* Shown by .full-page-active on player-container */
    flex-direction: column;
    pointer-events: auto;
    overflow: hidden; /* Prevent scrollbars on the box itself */
}
.player-container.full-page-active .player-box-fullpage { display: flex; }

.player-minimize-btn {
    position: absolute; top: 15px; left: 15px; font-size: 2em;
    color: #fff; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 50%;
    cursor: pointer; z-index: 10; /* Above Shaka UI */
    transition: background-color 0.2s;
}
.player-minimize-btn:hover { background-color: rgba(0,0,0,0.6); }

.shaka-player-wrapper-fullpage {
    width: calc(100% - 40px); /* margin left/right 20px */
    margin: 20px 20px 0 20px; /* Top margin, and side margins */
    aspect-ratio: 16 / 9;
    border-radius: 20px;
    overflow: hidden; /* Clips video to border-radius */
    background: #000;
    position: relative; /* For Shaka's controls */
}
#shaka-player { width: 100%; height: 100%; display: block; }

.player-details-area-fullpage {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 25px; /* More padding to align with player margins */
    margin-top: 10px;
}
.player-info-left-fullpage { flex-grow: 1; }
.player-title-fullpage { font-size: 1.5em; font-weight: 700; margin-bottom: 2px; } /* Match .section-title */
.player-category-fullpage { font-size: 0.9em; color: var(--text-secondary); body.dark-mode & { color: #a0a0a0; } }
.player-live-icon-fullpage { font-size: 1.8em; color: var(--accent-primary); font-variation-settings: 'FILL' 1; }

.player-suggested-channels-fullpage {
    padding: 15px 0 20px 0; /* No side padding, list will handle it */
    margin-top: 10px;
    flex-grow: 1;
    overflow: hidden; /* Parent overflow, list has scroll */
    display: flex;
    flex-direction: column;
}
.suggested-channels-header-fullpage {
    font-size: 1.2em; /* Slightly smaller than section title */
    font-weight: 700;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    padding-left: var(--category-list-padding); /* Align with global padding */
    padding-right: var(--category-list-padding);
}
.suggested-channels-header-fullpage .material-symbols-outlined { font-size: 1.3em; color: var(--accent-primary); }
.suggested-channels-list-fullpage {
    display: flex;
    overflow-x: auto;
    gap: var(--channel-card-horizontal-gap);
    padding-left: var(--category-list-padding); /* Align with global padding */
    padding-right: var(--category-list-padding);
    padding-bottom: 10px; /* For scrollbar */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none;  /* IE 10+ */
}
.suggested-channels-list-fullpage::-webkit-scrollbar { display: none; } /* Safari and Chrome */
.suggested-channels-list-fullpage .channel-card { /* Re-use channel-card styling */
    width: calc(var(--channel-card-width) * 0.9); /* Slightly smaller for suggestions */
}
.suggested-channels-list-fullpage .loading-text { width: 100%; text-align: center; }


/* Minimized Player Bar */
.player-minimized-bar {
    position: fixed;
    bottom: var(--footer-height); /* Above footer */
    left: 0;
    width: 100%;
    height: var(--minimized-player-bar-height);
    background: var(--player-minimized-bar-bg);
    border-top: 1px solid var(--player-minimized-bar-border);
    box-shadow: 0 -2px 10px var(--card-shadow);
    display: none; /* Shown by .minimized-bar-active on player-container */
    align-items: center;
    padding: 0 12px;
    box-sizing: border-box;
    z-index: 2500; /* Above footer, below full page player */
    cursor: pointer; /* Click to expand */
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    pointer-events: auto;
    transform: translateY(0);
    opacity: 1;
}
.player-container.minimized-bar-active .player-minimized-bar { display: flex; }
.player-container:not(.minimized-bar-active) .player-minimized-bar {
    transform: translateY(100%); opacity: 0; pointer-events: none;
}

.minimized-logo-container {
    position: relative;
    width: calc(var(--minimized-player-bar-height) * 19 / 9); /* Approx 19:6 using height, adjust ratio as needed */
    height: calc(var(--minimized-player-bar-height) * 0.75); /* 75% of bar height */
    max-width: 100px; /* Max width for logo */
    margin-right: 10px;
    background-color: #ccc; /* Placeholder bg */
    border-radius: 4px;
    overflow: hidden;
    flex-shrink: 0;
}
.minimized-bar-logo-img { width: 100%; height: 100%; object-fit: contain; display: block; }
.minimized-bar-logo-live-icon {
    position: absolute; top: 4px; right: 4px; font-size: 14px;
    color: var(--accent-primary); background: rgba(0,0,0,0.3);
    padding: 2px; border-radius: 50%; font-variation-settings: 'FILL' 1;
}
.minimized-bar-info { flex-grow: 1; overflow: hidden; margin-right: 10px; color: var(--player-minimized-bar-text); }
.minimized-bar-title { font-size: 0.9em; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 1px; }
.minimized-bar-category { font-size: 0.75em; color: var(--text-secondary); body.dark-mode & { color: #a0a0a0; } white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.minimized-bar-controls .material-symbols-outlined {
    font-size: 26px; color: var(--player-minimized-bar-text); cursor: pointer;
    padding: 5px; border-radius: 50%; transition: background-color 0.2s;
}
.minimized-bar-controls .material-symbols-outlined:hover { background-color: rgba(0,0,0,0.1); }
body.dark-mode .minimized-bar-controls .material-symbols-outlined:hover { background-color: rgba(255,255,255,0.1); }


/* HTML5 Fullscreen Player Info Overlay (Shaka's default controls) */
#shaka-player-container .player-info-overlay { /* This refers to a potential Shaka internal overlay */
    position: absolute; left: 20px; top: 50%; transform: translateY(-50%); z-index: 5050;
    color: #fff; background-color: rgba(0,0,0,0.5); padding: 10px 15px; border-radius: 8px;
    display: flex; align-items: center; gap: 12px; opacity: 0; pointer-events: none;
    transition: opacity 0.3s ease; text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
}
.player-container.html5-fullscreen-active.shaka-controls-active #shaka-player-container .player-info-overlay {
    opacity: 1; pointer-events: auto;
}
/* --- PLAYER STYLES END --- */


.profile-page { padding: 20px var(--category-list-padding) calc(var(--footer-height) + 20px) var(--category-list-padding); }
.profile-header-mobile { display: flex; flex-direction: column; align-items: center; margin-top: 20px; margin-bottom: 30px; }
.profile-page-icon { font-size: 80px; color: var(--profile-icon-color); margin-bottom: 10px; }
.profile-coming-soon-badge { background-color: var(--accent-primary); color: white; padding: 8px 15px; border-radius: 20px; font-weight: bold; font-size: 0.9em; text-align: center; }
.profile-menu-list { display: flex; flex-direction: column; gap: 12px; }
.profile-menu-list-item { background-color: var(--profile-page-item-bg); border-radius: 12px; padding: 15px 18px; display: flex; align-items: center; gap: 18px; color: var(--text-primary); text-decoration: none; font-size: 1em; font-weight: 600; box-shadow: 0 2px 5px var(--card-shadow); transition: background-color 0.2s, transform 0.1s; }
.profile-menu-list-item:hover { background-color: var(--profile-page-item-hover-bg); transform: translateY(-1px); }
.profile-menu-list-item .material-symbols-outlined, .profile-menu-list-item .profile-item-svg-icon { color: var(--text-secondary); font-size: 24px; flex-shrink: 0; }
.profile-menu-list-item span:not(.material-symbols-outlined):not(.slider):not(.profile-item-svg-icon) { flex-grow: 1; }
.profile-page-footer-info { margin-top: 40px; padding-bottom: 20px; text-align: center; font-size: 0.8em; color: var(--text-secondary); }
.profile-page-footer-info p { margin: 5px 0; line-height: 1.4; }

@media (max-width: 600px) {
  body { padding-bottom: var(--footer-height-small); }
  body.player-minimized-bar-active { padding-bottom: calc(var(--footer-height-small) + var(--minimized-player-bar-height-small)); }
   #mainContainer { padding-top: var(--topbar-height); }
   .hero-content-area-wrapper { height: var(--hero-content-visual-height-mobile); min-height: var(--hero-content-visual-min-height-mobile); max-height: var(--hero-content-visual-max-height-mobile); }
   .home-hero-content { height: auto; min-height: unset; max-height: unset; }
   .home-hero-content .feature-title { font-size: 2.7em; font-weight: 800; }
   .home-hero-content .feature-content-details { max-width: 70%; }
   .home-hero-content .feature-dots-container { gap: 6px; }
   .home-hero-content .feature-dot { width: 6px; height: 6px; }
   .home-hero-content .feature-logo img { height: 22px; max-width: 120px; }
   .home-hero-content .feature-desc { font-size: 0.85em; }

   a.logo img { height: 30px; }
   .topbar .material-symbols-outlined { font-size: 26px; }
   .section-title, .category-title { font-size: 1.2em; }
   .channel-card { width: calc(var(--channel-card-width) * 0.85); }
   .channel-card .channel-live-icon { font-size: 16px; top: 4px; right: 4px; }
   .footer-item .footer-icon { font-size: 22px; }
   .footer-label { font-size: 12px; }
   .footer-nav { height: var(--footer-height-small); }

    .player-minimize-btn { font-size: 1.8em; top:12px; left:12px; padding:6px; }
    .shaka-player-wrapper-fullpage { width: calc(100% - 20px); margin: 15px 10px 0 10px; border-radius: 15px;}
    .player-details-area-fullpage { padding: 10px 15px; }
    .player-title-fullpage { font-size: 1.2em; }
    .player-category-fullpage { font-size: 0.8em; }
    .suggested-channels-header-fullpage { font-size: 1em; padding-left: 15px; padding-right: 15px; }
    .suggested-channels-list-fullpage { padding-left: 15px; padding-right: 15px; gap: 10px; }
    .suggested-channels-list-fullpage .channel-card { width: calc(var(--channel-card-width) * 0.75); }

    .player-minimized-bar { bottom: var(--footer-height-small); height: var(--minimized-player-bar-height-small); }
    .minimized-logo-container { height: calc(var(--minimized-player-bar-height-small) * 0.7); width: calc(var(--minimized-player-bar-height-small) * 0.7 * 19 / 9); }
    .minimized-bar-title { font-size: 0.85em; }
    .minimized-bar-category { font-size: 0.7em; }
    .minimized-bar-controls .material-symbols-outlined { font-size: 24px; }
}

@media (min-width: 1024px) {
    :root {
        /* --channel-card-width: 200px; /* This variable is now directly applied below */
        --desktop-nav-width: 70px;
        --category-list-padding-desktop: 40px;
    }
    /* Desktop specific re-definition of --channel-card-width.
       This ensures it's 200px in this media query context for rules using it. */
    :root {
        --channel-card-width: 200px;
    }

    body { padding-bottom: 0 !important; } /* No footer nav, no body padding for it */
    body.player-minimized-bar-active { padding-bottom: var(--minimized-player-bar-height) !important; } /* Padding for minimized bar */
    .footer-nav { display: none !important; }

    /* MODIFIED: Logo position and appearance */
    .topbar a.logo {
        position: fixed;
        top: 15px; /* Adjusted from bottom/right */
        left: 15px;  /* Adjusted from bottom/right */
        z-index: 1600;
        padding: 0; /* Removed padding as background is transparent */
        background-color: transparent !important; /* Removed background */
        box-shadow: none !important; /* Removed shadow */
        height: auto;
        /* transition: none; Removed background transition */
    }
    /* body.dark-mode .topbar a.logo - no longer needed due to transparent bg */
    .topbar a.logo img { height: 32px; /* Adjusted size slightly if needed */ }
    /* body.home-at-top .topbar a.logo - no longer needed for bg */
    /* body.dark-mode.home-at-top .topbar a.logo - no longer needed for bg */

    .topbar { padding-left: 25px; padding-right: 25px; left: var(--desktop-nav-width); width: calc(100% - var(--desktop-nav-width)); justify-content: flex-end; }
    .topbar .topbar-icons { display: none !important; }

    .desktop-vertical-nav { display: flex; flex-direction: column; align-items: center; gap: 20px; position: fixed; left: 0; top: 50%; transform: translateY(-50%); padding: 20px 0; width: var(--desktop-nav-width); z-index: 1200; background: transparent !important; }
    .desktop-vertical-nav-item { cursor: pointer; color: var(--text-secondary); position: relative; padding: 8px 12px; display: flex; justify-content: center; align-items: center; transition: color 0.2s ease, transform 0.2s ease; }
    .desktop-vertical-nav-item .material-symbols-outlined { font-size: 28px; font-variation-settings: 'FILL' 0; transition: font-variation-settings 0.3s ease, color 0.2s ease; display: block; color: inherit; }
    .desktop-vertical-nav-item:hover { color: var(--always-white); transform: scale(1.1); }
    .desktop-vertical-nav-item.active { color: var(--always-white) !important; }
    .desktop-vertical-nav-item.active .material-symbols-outlined { font-variation-settings: 'FILL' 1; color: var(--always-white) !important; }
    .desktop-vertical-nav-item.active::after { content: ''; position: absolute; left: 0px; top: 50%; transform: translateY(-50%); width: 4px; height: 60%; background-color: var(--always-white) !important; border-radius: 0 2px 2px 0; transition: height 0.2s ease-in-out; }

    #mainContainer { padding-top: var(--topbar-height); padding-left: var(--desktop-nav-width); }
    
    /* MODIFIED: Profile/Categories page layout */
    .categories-page, .profile-page {
        padding: 30px var(--category-list-padding-desktop);
        box-sizing: border-box;
    }
    .categories-page .categories-header, .categories-page .category-title, .categories-page .category-pills-container, .categories-page .category-channels,
    .player-suggested-channels-fullpage .suggested-channels-header-fullpage,
    .player-suggested-channels-fullpage .suggested-channels-list-fullpage { padding-left: 0; padding-right: 0; }

    .home-page-content-below-hero .section-title-container, .home-page-content-below-hero .horizontal-list { padding-left: var(--category-list-padding-desktop); padding-right: var(--category-list-padding-desktop); }
    #homeSection { padding-left: 0; }
    .home-hero-background { left: var(--desktop-nav-width); width: calc(100% - var(--desktop-nav-width)); }
    .hero-content-area-wrapper { height: var(--hero-content-visual-height-desktop); min-height: var(--hero-content-visual-min-height-desktop); max-height: var(--hero-content-visual-max-height-desktop); }
    .home-hero-content { bottom: 65px; padding: 0 40px 40px 40px; height: auto; min-height: unset; max-height: unset; }
    .home-hero-content .feature-title { font-size: 2.8em; font-weight: 800; }
    .home-hero-content .feature-content-details { max-width: 50%; }
    .home-hero-content .feature-logo img { height: 45px; max-width: 220px; }
    .home-hero-content .feature-desc { font-size: 1.1em; }
    .home-hero-content .feature-dots-container .feature-dot { width: 10px; height: 10px; }

    .horizontal-list, .category-channels, .suggested-channels-list-fullpage {
        gap: 18px;
        padding-bottom: 15px;
        scrollbar-width: thin;
        scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
    }
    /* Updated min-height for horizontal-list and category-channels based on 16:9 aspect ratio */
    .horizontal-list {
        min-height: calc(var(--channel-card-width) * 9 / 16 + 15px); /* Adjusted for 16:9 + padding */
    }
    .horizontal-list::-webkit-scrollbar, .category-channels::-webkit-scrollbar, .suggested-channels-list-fullpage::-webkit-scrollbar { display: block; height: 8px; }
    .horizontal-list::-webkit-scrollbar-track, .category-channels::-webkit-scrollbar-track, .suggested-channels-list-fullpage::-webkit-scrollbar-track { background: var(--scrollbar-track); border-radius: 4px; }
    .horizontal-list::-webkit-scrollbar-thumb, .category-channels::-webkit-scrollbar-thumb, .suggested-channels-list-fullpage::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); border-radius: 4px; }
    .horizontal-list:hover::-webkit-scrollbar-thumb, .category-channels:hover::-webkit-scrollbar-thumb, .suggested-channels-list-fullpage:hover::-webkit-scrollbar-thumb { background-color: #888; body.light-mode & { background-color: #a0a0a0; } }
    
    /* MODIFIED: Ensure general channel cards use the desktop width and 16:9 aspect ratio */
    .channel-card {
        width: var(--channel-card-width); /* Explicitly use the 200px var */
        aspect-ratio: 16 / 9; /* CORRECTED: Set 16:9 aspect ratio for desktop */
        /* height: auto; This is implicit with aspect-ratio and width */
    }
    .channel-card:hover { transform: scale(1.05); box-shadow: 0 8px 25px var(--card-shadow); }
    .channel-card::before { filter: blur(var(--channel-card-blur-amount)) brightness(100%) saturate(100%); }
    /* The img styles .channel-card img are already defined globally and should work well for balancing logos:
       max-width: 80%; max-height: 70%; object-fit: contain;
    */
    
    .category-channels {
        min-height: calc(var(--channel-card-width) * 9 / 16 + 30px); /* CORRECTED: Adjusted min-height for 16:9 card aspect ratio */
    }
    .category-pill { padding: 9px 18px; font-size: 0.95em; }
    .section-title-container { margin: 35px 0 20px 0; }
    .section-title, .category-title { font-size: 1.2em; }

    .search-modal .search-bar-modal { max-width: 600px; margin: 30px auto 20px auto; }
    .search-results-modal { max-width: 600px; margin: 0 auto; }

    .shaka-player-wrapper-fullpage { width: calc(100% - 80px); margin: 30px 40px 0 40px; border-radius: 20px;}
    .player-details-area-fullpage { padding: 15px 45px; }
    .player-title-fullpage { font-size: 1.6em; }
    .player-category-fullpage { font-size: 1em; }
    .player-suggested-channels-fullpage .suggested-channels-header-fullpage,
    .player-suggested-channels-fullpage .suggested-channels-list-fullpage { padding-left: var(--category-list-padding-desktop); padding-right: var(--category-list-padding-desktop); }
    
    /* Suggested channels will inherit .channel-card's 16:9 aspect ratio */
    .suggested-channels-list-fullpage .channel-card {
        width: var(--channel-card-width); /* Will use 200px, inherits 16/9 aspect ratio */
    }

    .player-minimized-bar { bottom: 0 !important; left: var(--desktop-nav-width) !important; width: calc(100% - var(--desktop-nav-width)) !important; border-left: 1px solid var(--player-minimized-bar-border); }
}
